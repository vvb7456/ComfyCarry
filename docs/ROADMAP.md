# ComfyCarry é¡¹ç›®è·¯çº¿å›¾

> æœ€åæ›´æ–°: 2026-02-18 | å½“å‰ç‰ˆæœ¬: v2.4

## é¡¹ç›®å®šä½

ComfyCarry æ˜¯ä¸€ä¸ª**ComfyUI äº‘ç«¯å®ä¾‹ç®¡ç†å±‚**ï¼Œè¿è¡Œåœ¨ vast.ai / RunPod çš„ Docker å®¹å™¨å†…ã€‚æ ¸å¿ƒç†å¿µï¼š**å®ä¾‹ç”¨åå³æ¯ï¼Œç¯å¢ƒç§’çº§æ¢å¤**ã€‚

æ‰€æœ‰èµ„äº§ï¼ˆå·¥ä½œæµã€æ¨¡å‹ã€æ’ä»¶åˆ—è¡¨ã€é…ç½®ï¼‰é€šè¿‡ Cloud Sync æŒä¹…åŒ–åˆ°ç”¨æˆ·è‡ªæœ‰ remoteï¼ˆR2/OneDrive/Google Drive/WebDAV ç­‰ï¼‰ï¼Œæ–°å®ä¾‹éƒ¨ç½²åè‡ªåŠ¨æ¢å¤åˆ°ä¸Šæ¬¡å·¥ä½œçŠ¶æ€ã€‚

---

## ä¸€ã€æ¶æ„æ¼”è¿›

### å½“å‰æ¶æ„ (v2.4)

```
å•æ–‡ä»¶åç«¯ (workspace_manager.py, 3500+ è¡Œ)
â”œâ”€â”€ Flask API è·¯ç”± (50+ ç«¯ç‚¹)
â”œâ”€â”€ Deploy Engine (éƒ¨ç½²å¼•æ“)
â”œâ”€â”€ Sync v2 Engine (åŒæ­¥è§„åˆ™å¼•æ“)
â”œâ”€â”€ ComfyUI WSâ†’SSE Bridge (å®æ—¶æ¡¥æ¥)
â”œâ”€â”€ CivitAI Proxy (æ¨¡å‹æœç´¢ä»£ç†)
â””â”€â”€ Plugin Manager Proxy (æ’ä»¶ç®¡ç†ä»£ç†)

å•æ–‡ä»¶å‰ç«¯ (dashboard.js, 3100+ è¡Œ)
â”œâ”€â”€ SPA è·¯ç”±å’Œé¡µé¢ç®¡ç†
â”œâ”€â”€ 7 ä¸ªé¡µé¢çš„ UI é€»è¾‘
â”œâ”€â”€ API è°ƒç”¨ / è½®è¯¢ / SSE æ¶ˆè´¹
â””â”€â”€ ComfyUI WebSocket æ¡¥æ¥

å•æ–‡ä»¶ HTML (dashboard.html, 2500+ è¡Œ)
â”œâ”€â”€ æ‰€æœ‰é¡µé¢ HTML ç»“æ„
â”œâ”€â”€ æ‰€æœ‰ CSS æ ·å¼
â””â”€â”€ Modal / Toast ç­‰ç»„ä»¶
```

### ç›®æ ‡æ¶æ„ (v3.0)

**åç«¯æ¨¡å—åŒ–**ï¼ˆä¸è¦æ±‚æ‰“åŒ…ä¸ºå•æ–‡ä»¶ï¼Œbootstrap.sh è´Ÿè´£ä¸‹è½½æ•´ä¸ªä»“åº“ç›®å½•ï¼‰ï¼š

```
comfycarry/
â”œâ”€â”€ app.py                    # Flask app åˆ›å»ºã€è“å›¾æ³¨å†Œã€å¯åŠ¨å…¥å£
â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç† (.dashboard_env, ç¯å¢ƒå˜é‡)
â”œâ”€â”€ auth.py                   # è®¤è¯ä¸­é—´ä»¶
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ system.py             # /api/system, /api/services
â”‚   â”œâ”€â”€ models.py             # /api/local_models, /api/search, /api/download
â”‚   â”œâ”€â”€ comfyui.py            # /api/comfyui/*
â”‚   â”œâ”€â”€ plugins.py            # /api/plugins/*
â”‚   â”œâ”€â”€ tunnel.py             # /api/tunnel_*
â”‚   â”œâ”€â”€ sync.py               # /api/sync/*
â”‚   â”œâ”€â”€ settings.py           # /api/settings/*
â”‚   â””â”€â”€ setup.py              # /api/setup/*
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ deploy_engine.py      # _run_deploy() åŠæ‰€æœ‰éƒ¨ç½²é€»è¾‘
â”‚   â”œâ”€â”€ sync_engine.py        # SyncWorker, sync rules, rclone æ“ä½œ
â”‚   â”œâ”€â”€ comfyui_bridge.py     # ComfyWSBridge, SSE å¹¿æ’­
â”‚   â”œâ”€â”€ download_manager.py   # ä¸‹è½½é˜Ÿåˆ—ç®¡ç†
â”‚   â””â”€â”€ pm2.py                # PM2 è¿›ç¨‹ç®¡ç†å°è£…
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”œâ”€â”€ setup_wizard.html
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ core.js           # API è°ƒç”¨ã€è·¯ç”±ã€Toastã€å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ page-dashboard.js # æ€»è§ˆé¡µé€»è¾‘
â”‚       â”œâ”€â”€ page-models.js    # æ¨¡å‹é¡µé€»è¾‘
â”‚       â”œâ”€â”€ page-comfyui.js   # ComfyUI é¡µé€»è¾‘
â”‚       â”œâ”€â”€ page-plugins.js   # æ’ä»¶é¡µé€»è¾‘
â”‚       â”œâ”€â”€ page-tunnel.js    # Tunnel é¡µé€»è¾‘
â”‚       â”œâ”€â”€ page-sync.js      # Sync é¡µé€»è¾‘
â”‚       â””â”€â”€ page-settings.js  # è®¾ç½®é¡µé€»è¾‘
â””â”€â”€ utils.py                  # é€šç”¨å·¥å…·å‡½æ•°
```

**è¿ç§»ç­–ç•¥**ï¼šé€æ­¥æ‹†åˆ†ï¼Œæ¯æ¬¡æå–ä¸€ä¸ªæ¨¡å—å¹¶ç¡®ä¿åŠŸèƒ½ä¸å˜ã€‚ä¼˜å…ˆæ‹†åˆ†æœ€ç‹¬ç«‹çš„æ¨¡å—ï¼ˆå¦‚ `sync_engine.py`ã€`deploy_engine.py`ï¼‰ã€‚

---

## äºŒã€åŠŸèƒ½è·¯çº¿å›¾

### Phase 1: Dashboard æ€»è§ˆé¡µé‡æ„ (v2.5) â† **å½“å‰ä¼˜å…ˆ**

> è¯¦è§ä¸‹æ–¹ [Dashboard æ€»è§ˆé¡µé‡æ„è§„åˆ’](#dashboard-æ€»è§ˆé¡µé‡æ„è§„åˆ’)

### Phase 2: åç«¯æ¨¡å—åŒ–æ‹†åˆ† (v2.6)

- å°† workspace_manager.py æ‹†åˆ†ä¸ºæ¨¡å—åŒ–ç»“æ„
- å‰ç«¯ JS æŒ‰é¡µé¢æ‹†åˆ†ä¸º ES Modules
- ä¿æŒæ‰€æœ‰ API å…¼å®¹

### Phase 3: é”™è¯¯æ¢å¤ä¸æ—¥å¿— (v2.7)

- éƒ¨ç½²å¼•æ“å¹‚ç­‰æ€§ï¼ˆå·²æœ‰ `deploy_steps_completed` åŸºç¡€ï¼Œéœ€å¼ºåŒ–æ–­ç‚¹ç»­ä¼ ï¼‰
- Sync Worker exponential backoff é‡è¯•
- æŒä¹…åŒ–æ—¥å¿—ï¼ˆæ–‡ä»¶ + Dashboard å›çœ‹ï¼‰
- `/api/health` ç»¼åˆå¥åº·ç«¯ç‚¹

### Phase 4: å‰ç«¯ ES Modules åŒ– (v2.8)

- dashboard.js æ‹†åˆ†ä¸º `js/core.js` + æ¯é¡µä¸€ä¸ª module
- ä½¿ç”¨ `<script type="module">` åŠ è½½
- æ— æ„å»ºæ­¥éª¤ï¼Œä¿æŒåŸç”Ÿå¼€å‘ä½“éªŒ

### ä½ä¼˜å…ˆçº§ (backlog)

- æ¨¡å‹æ¸…å• (Model Manifest) + æŒ‰éœ€æ‹‰å–
- API Token è®¤è¯ï¼ˆæ–¹ä¾¿è„šæœ¬/CI è°ƒç”¨ï¼‰
- è½»é‡å‰ç«¯æ¡†æ¶è¿ç§»ï¼ˆPreact + HTMï¼‰
- å¤šå®ä¾‹ API æ”¯æŒï¼ˆæš´éœ²æ ‡å‡†åŒ–çŠ¶æ€ç«¯ç‚¹ä¾›å¤–éƒ¨ç¼–æ’ï¼‰
- è‡ªåŠ¨åŒ–æµ‹è¯•åŸºç¡€æ¡†æ¶

---

## Dashboard æ€»è§ˆé¡µé‡æ„è§„åˆ’

### ç°çŠ¶é—®é¢˜

å½“å‰æ€»è§ˆé¡µåªæœ‰ 3 ä¸ªåŒºåŸŸï¼š
1. Tunnel å¿«é€Ÿé“¾æ¥æ¡
2. ç¡¬ä»¶ç›‘æ§å¡ç‰‡ (CPU/å†…å­˜/ç£ç›˜/GPU)
3. PM2 æœåŠ¡ç®¡ç†è¡¨æ ¼

**æ ¸å¿ƒé—®é¢˜**ï¼šè¿™æ˜¯ä¸€ä¸ª"ç³»ç»Ÿç›‘æ§é¡µ"è€Œé"å·¥ä½œå°æ€»è§ˆé¡µ"ã€‚ç”¨æˆ·æ‰“å¼€ Dashboard åæ— æ³•ä¸€çœ¼äº†è§£ï¼šComfyUI åœ¨å¹²ä»€ä¹ˆï¼ŸåŒæ­¥çŠ¶æ€å¦‚ä½•ï¼Ÿæœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„é—®é¢˜ï¼Ÿæ¨¡å‹ä¸‹è½½è¿›åº¦ï¼Ÿ

### è®¾è®¡ç›®æ ‡

**ä¸€å±å‘ˆç°å®ä¾‹å…¨è²Œï¼Œæ‰€æœ‰å­ç³»ç»Ÿä¸€ç›®äº†ç„¶ã€‚**

ç”¨æˆ·æ‰“å¼€æ€»è§ˆé¡µååº”èƒ½åœ¨ 5 ç§’å†…å›ç­”è¿™äº›é—®é¢˜ï¼š
- æˆ‘çš„ ComfyUI åœ¨çº¿å—ï¼Ÿæ­£åœ¨å¤„ç†ä»€ä¹ˆä»»åŠ¡ï¼Ÿ
- åŒæ­¥çŠ¶æ€æ­£å¸¸å—ï¼Ÿæœ€åä¸€æ¬¡åŒæ­¥æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ
- æœ‰æ²¡æœ‰æ¨¡å‹æ­£åœ¨ä¸‹è½½ï¼Ÿ
- ç£ç›˜/VRAM è¿˜å¤Ÿç”¨å—ï¼Ÿ
- Tunnel èƒ½æ­£å¸¸è®¿é—®å—ï¼Ÿ
- æœ‰æ²¡æœ‰éœ€è¦å¤„ç†çš„å‘Šè­¦ï¼Ÿ

### æ–°å¸ƒå±€ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š æ€»è§ˆ                                    [ğŸ“¦ é…ç½®]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â”Œâ”€ ğŸ”— å¿«é€Ÿè®¿é—® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ [ğŸ¨ ComfyUI]  [ğŸ“Š Dashboard]  [â˜ï¸ R2]  [ğŸ“ NAS]    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€ âš¡ å®ä¾‹çŠ¶æ€ (Status Bar) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ğŸŸ¢ ComfyUI v0.12.3 åœ¨çº¿ â”‚ â± è¿è¡Œ 2h30m             â”‚â”‚
â”‚ â”‚ ğŸ¯ é˜Ÿåˆ—: 1 è¿è¡Œä¸­ / 0 ç­‰å¾…                           â”‚â”‚
â”‚ â”‚ â˜ï¸ Sync: æ­£å¸¸ (15så‰) â”‚ ğŸŒ Tunnel: åœ¨çº¿             â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ GPU â– â– â– â–‘â–‘ â”‚ â”‚ VRAM â– â– â–‘â–‘ â”‚ â”‚ å†…å­˜ â– â–‘â–‘â–‘ â”‚ â”‚ ç£ç›˜ â– â– â–‘â–‘ â”‚â”‚
â”‚ â”‚ 45% 62Â°C  â”‚ â”‚ 8.2/16 GB â”‚ â”‚ 12/64 GB  â”‚ â”‚ 32/64 GB  â”‚â”‚
â”‚ â”‚ RTX 5060Tiâ”‚ â”‚           â”‚ â”‚           â”‚ â”‚ /workspace â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€ ğŸ“¥ æ´»åŠ¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â–¶ æ­£åœ¨ç”Ÿæˆ: workflow_xyz (èŠ‚ç‚¹ 4/12, æ­¥éª¤ 8/20)      â”‚â”‚
â”‚ â”‚ â¬‡ ä¸‹è½½ä¸­: model.safetensors (2.1/4.3 GB, 45 MB/s)  â”‚â”‚
â”‚ â”‚ â˜  åŒæ­¥: â¬† output â†’ OneDrive (ç›‘æ§ä¸­, æ¯15s)        â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€ ğŸ”§ æœåŠ¡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â— comfy     åœ¨çº¿  2h30m  CPU 2.1%  1.2GB  [â–¶â¹ğŸ”„]   â”‚â”‚
â”‚ â”‚ â— dashboard åœ¨çº¿  2h31m  CPU 0.5%  48MB   [â–¶â¹ğŸ”„]   â”‚â”‚
â”‚ â”‚ â— tunnel    åœ¨çº¿  2h31m  CPU 0.1%  36MB   [â–¶â¹ğŸ”„]   â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€ â„¹ï¸ ç¯å¢ƒä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ComfyUI 0.12.3 â”‚ PyTorch 2.10+cu128 â”‚ Python 3.13   â”‚â”‚
â”‚ â”‚ RTX 5060 Ti 16GBâ”‚ 28æ ¸ CPU â”‚ Dashboard v2.5          â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŒºåŸŸè¯¦è§£

#### 1. å¿«é€Ÿè®¿é—®æ  (Quick Links)

ä¿ç•™å½“å‰ tunnel-links åŠŸèƒ½ï¼Œä½†å¢å¼ºæ ·å¼ï¼š
- å›¾æ ‡ + æ–‡å­—æŒ‰é’®
- å¦‚æœ tunnel ç¦»çº¿ï¼ŒæŒ‰é’®æ˜¾ç¤º disabled + æç¤º
- å¢åŠ åˆ° rclone remote Web UIï¼ˆå¦‚æœæœ‰ï¼‰çš„å¿«é€Ÿé“¾æ¥

**æ•°æ®æ¥æº**: `GET /api/tunnel_links`

#### 2. å®ä¾‹çŠ¶æ€æ  (Status Bar) â€” **æ–°å¢æ ¸å¿ƒåŒºåŸŸ**

ä¸€è¡Œå¼çŠ¶æ€æ¦‚è§ˆï¼Œç”¨é¢œè‰²ç¼–ç çš„çŠ¶æ€æ ‡ç­¾ï¼ˆbadgeï¼‰é›†ä¸­å±•ç¤ºï¼š

| æ ‡ç­¾ | ç»¿è‰² | é»„è‰² | çº¢è‰² |
|------|------|------|------|
| ComfyUI | åœ¨çº¿ | å¯åŠ¨ä¸­ | ç¦»çº¿/å´©æºƒ |
| Queue | ç©ºé—² | æœ‰ä»»åŠ¡è¿è¡Œä¸­ | é˜Ÿåˆ—å †ç§¯ (>5) |
| Sync | æ­£å¸¸ (æœ€è¿‘æˆåŠŸ) | æ‰§è¡Œä¸­ | å¤±è´¥/ç¦»çº¿ |
| Tunnel | åœ¨çº¿ | â€” | ç¦»çº¿ |

**æ•°æ®æ¥æº**:
- `GET /api/comfyui/status` â†’ `online`, `pm2_status`, `system.comfyui_version`
- `GET /api/comfyui/queue` â†’ `queue_pending`, `queue_running` çš„é•¿åº¦
- `GET /api/sync/status` â†’ `worker_running`, `log_lines` (æœ€åä¸€æ¡åˆ¤æ–­çŠ¶æ€)
- `GET /api/tunnel_status` â†’ `running`
- `GET /api/system` â†’ `uptime`

#### 3. ç¡¬ä»¶æŒ‡æ ‡å¡ç‰‡ (Metrics Cards) â€” **ä¼˜åŒ–ç°æœ‰**

ä¿ç•™ 4 å¡ç‰‡ç½‘æ ¼ï¼Œä½†ä¼˜åŒ–ä¿¡æ¯å¯†åº¦ï¼š

- **GPU å¡ç‰‡**: åˆ©ç”¨ç‡ + æ¸©åº¦ + åŠŸè€—/åŠŸè€—ä¸Šé™ + VRAM è¿›åº¦æ¡
- **VRAM å¡ç‰‡**: å•ç‹¬å±•ç¤º VRAMï¼ˆå¯¹ ComfyUI ç”¨æˆ·æœ€å…³é”®ï¼‰ï¼Œused/total + è¿›åº¦æ¡
- **å†…å­˜å¡ç‰‡**: used/total + è¿›åº¦æ¡
- **ç£ç›˜å¡ç‰‡**: used/total + free + è¿›åº¦æ¡ï¼Œæ ‡æ³¨è·¯å¾„

é¢œè‰²ç¼–ç é˜ˆå€¼ï¼š
- è¿›åº¦æ¡ <60% ç»¿è‰²ï¼Œ60-85% ç¥ç€è‰²ï¼Œ>85% çº¢è‰²
- GPU æ¸©åº¦ <70Â°C æ­£å¸¸ï¼Œ70-85Â°C ç¥ç€è‰²ï¼Œ>85Â°C çº¢è‰²

CPU æŒ‡æ ‡é™çº§ä¸ºå°å­—å‰¯ä¿¡æ¯ï¼ˆå¯¹ GPU å®ä¾‹ç”¨æˆ·é‡è¦æ€§è¾ƒä½ï¼‰ã€‚

**æ•°æ®æ¥æº**: `GET /api/system`ï¼ˆç°æœ‰ API å·²å…¨éƒ¨æä¾›ï¼‰

#### 4. æ´»åŠ¨é¢æ¿ (Activity Feed) â€” **æ–°å¢æ ¸å¿ƒåŒºåŸŸ**

å®æ—¶å±•ç¤ºå½“å‰æ­£åœ¨å‘ç”Ÿçš„äº‹ä»¶ï¼Œç±»ä¼¼æ´»åŠ¨æµï¼š

| äº‹ä»¶ç±»å‹ | æ•°æ®æ¥æº | æ˜¾ç¤ºå†…å®¹ |
|----------|----------|----------|
| ComfyUI ç”Ÿæˆä¸­ | `/api/comfyui/queue` + SSE events | å½“å‰èŠ‚ç‚¹è¿›åº¦ã€æ­¥éª¤è¿›åº¦ |
| æ¨¡å‹ä¸‹è½½ä¸­ | `/api/download/status` | æ–‡ä»¶åã€è¿›åº¦ç™¾åˆ†æ¯”ã€é€Ÿåº¦ |
| Sync ä»»åŠ¡ | `/api/sync/status` | è§„åˆ™åã€æ–¹å‘ã€æœ€åæ‰§è¡Œç»“æœ |
| æ’ä»¶æ“ä½œ | `/api/plugins/queue_status` | å®‰è£…/æ›´æ–°è¿›åº¦ |

ç©ºé—²æ—¶æ˜¾ç¤º "âœ¨ ä¸€åˆ‡å°±ç»ªï¼Œç­‰å¾…ä»»åŠ¡" + æœ€åæ´»åŠ¨æ—¶é—´ã€‚

#### 5. æœåŠ¡ç®¡ç† (Services) â€” **ä¼˜åŒ–ç°æœ‰**

ä¿ç•™ PM2 è¿›ç¨‹è¡¨ï¼Œä½†å¢å¼ºï¼š
- å¢åŠ  uptime åˆ—ï¼ˆæ ¼å¼åŒ–ä¸º "2h30m"ï¼‰ï¼Œä½¿ç”¨ API å·²è¿”å›çš„ `pm_uptime`
- çŠ¶æ€åˆ—å¢åŠ é¢œè‰² badge æ ·å¼ï¼ˆä¸ä»…æ˜¯å°åœ†ç‚¹ï¼‰
- ç§»åŠ¨ç«¯å“åº”å¼ï¼šè¡¨æ ¼å˜ä¸ºå¡ç‰‡åˆ—è¡¨

**æ•°æ®æ¥æº**: `GET /api/services`

#### 6. ç¯å¢ƒä¿¡æ¯ (Environment Info) â€” **æ–°å¢**

åº•éƒ¨ä¸€è¡Œå¼å±•ç¤ºï¼Œç´§å‡‘çš„ç°è‰²æ ‡ç­¾ï¼š
- ComfyUI ç‰ˆæœ¬ã€PyTorch ç‰ˆæœ¬ã€Python ç‰ˆæœ¬
- GPU å‹å·ã€VRAMã€CPU æ ¸å¿ƒæ•°
- Dashboard ç‰ˆæœ¬

**æ•°æ®æ¥æº**: 
- `GET /api/comfyui/status` â†’ `system.*`
- `GET /api/version` â†’ Dashboard ç‰ˆæœ¬
- `GET /api/system` â†’ GPU åç§°

### æ–°å¢åç«¯ API

å»ºè®®å¢åŠ ä¸€ä¸ªèšåˆç«¯ç‚¹ï¼Œé¿å…å‰ç«¯éœ€è¦å¹¶å‘è°ƒç”¨ 5+ ä¸ª APIï¼š

```
GET /api/overview
```

è¿”å›ï¼š
```json
{
  "system": { /* /api/system çš„å®Œæ•´æ•°æ® */ },
  "services": { /* /api/services çš„å®Œæ•´æ•°æ® */ },
  "comfyui": {
    "online": true,
    "version": "0.12.3",
    "pytorch_version": "2.10.0+cu128",
    "python_version": "3.13.12",
    "queue_pending": 0,
    "queue_running": 1,
    "current_node": "KSampler",
    "progress": { "value": 8, "max": 20 }
  },
  "sync": {
    "worker_running": true,
    "rules_count": 4,
    "last_activity": "2026-02-18T09:32:45",
    "last_status": "success"
  },
  "tunnel": {
    "running": true,
    "links": [ /* tunnel_links æ•°æ® */ ]
  },
  "downloads": {
    "active_count": 0,
    "queue_count": 0,
    "current": null
  },
  "dashboard_version": "v2.5"
}
```

è¿™æ ·å‰ç«¯åªéœ€ä¸€æ¬¡ `fetch('/api/overview')` å°±èƒ½è·å¾—æ€»è§ˆé¡µæ‰€éœ€çš„å…¨éƒ¨æ•°æ®ã€‚

### æ•°æ®åˆ·æ–°ç­–ç•¥

| æ•°æ® | åˆ·æ–°æ–¹å¼ | é¢‘ç‡ | è¯´æ˜ |
|------|----------|------|------|
| ç¡¬ä»¶æŒ‡æ ‡ | è½®è¯¢ `/api/overview` | 5 ç§’ | CPU/GPU åˆ©ç”¨ç‡éœ€è¦å®šæœŸæ›´æ–° |
| ComfyUI è¿›åº¦ | SSE `/api/comfyui/events` | å®æ—¶ | å·²æœ‰ WSâ†’SSE æ¡¥æ¥ï¼Œåªéœ€åœ¨æ€»è§ˆé¡µä¹Ÿæ¶ˆè´¹ |
| æœåŠ¡çŠ¶æ€ | éš overview è½®è¯¢ | 5 ç§’ | å˜åŒ–ä¸é¢‘ç¹ |
| Tunnel é“¾æ¥ | é¦–æ¬¡åŠ è½½ + å˜åŒ–æ—¶ | ä¸€æ¬¡ | Tunnel çŠ¶æ€æå°‘å˜åŒ– |

### CSS æ–°å¢æ ·å¼

```css
/* çŠ¶æ€æ  */
.status-bar { 
  display: flex; flex-wrap: wrap; gap: 8px; 
  padding: 16px; background: var(--c1); 
  border-radius: var(--r); border: 1px solid var(--bd);
  margin-bottom: 20px;
}
.status-badge { 
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 12px; border-radius: 20px; 
  font-size: 0.82rem; font-weight: 500;
}
.status-badge.green { background: rgba(16,185,129,0.15); color: #10b981; }
.status-badge.amber { background: rgba(245,158,11,0.15); color: #f59e0b; }
.status-badge.red   { background: rgba(239,68,68,0.15); color: #ef4444; }

/* æ´»åŠ¨é¢æ¿ */
.activity-feed { 
  background: var(--c1); border: 1px solid var(--bd); 
  border-radius: var(--r); overflow: hidden;
  margin-bottom: 20px;
}
.activity-item {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 16px; border-bottom: 1px solid var(--bd);
}
.activity-item:last-child { border-bottom: none; }
.activity-icon { font-size: 1.2rem; flex-shrink: 0; }
.activity-text { flex: 1; font-size: 0.88rem; }
.activity-meta { font-size: 0.78rem; color: var(--t3); }

/* ç¯å¢ƒä¿¡æ¯æ  */
.env-info {
  display: flex; flex-wrap: wrap; gap: 8px;
  padding: 12px 16px; background: var(--c1);
  border: 1px solid var(--bd); border-radius: var(--r);
}
.env-tag {
  font-size: 0.75rem; color: var(--t3);
  padding: 2px 8px; background: var(--bg);
  border-radius: 4px; border: 1px solid var(--bd);
}
```

### å®æ–½æ­¥éª¤

1. **åç«¯**: æ–°å¢ `/api/overview` èšåˆç«¯ç‚¹ (workspace_manager.py)
2. **HTML**: é‡å†™ `#page-dashboard` çš„ HTML ç»“æ„
3. **JS**: é‡å†™ `refreshDashboard()` æ¶ˆè´¹æ–° APIï¼Œå¢åŠ  SSE è¿›åº¦æ¶ˆè´¹
4. **CSS**: æ–°å¢çŠ¶æ€æ ã€æ´»åŠ¨é¢æ¿ã€ç¯å¢ƒä¿¡æ¯æ ·å¼
5. **æµ‹è¯•**: vast.ai å®ä¾‹éªŒè¯

### è®¾è®¡åŸåˆ™

- **ä¿¡æ¯å±‚çº§**: çŠ¶æ€ > æ´»åŠ¨ > æŒ‡æ ‡ > æœåŠ¡ > ç¯å¢ƒï¼ˆç”±ä¸Šåˆ°ä¸‹é‡è¦æ€§é€’å‡ï¼‰
- **é¢œè‰²ç¼–ç **: ç»¿=æ­£å¸¸ã€ç¥ç€=æ³¨æ„ã€çº¢=å¼‚å¸¸ï¼Œå…¨å±€ä¸€è‡´
- **é›¶ç­‰å¾…**: é¡µé¢åˆ‡å…¥æ—¶ç«‹å³æ˜¾ç¤ºä¸Šæ¬¡ç¼“å­˜æ•°æ®ï¼Œåå°åˆ·æ–°åå¹³æ»‘æ›´æ–°
- **ç§»åŠ¨ç«¯å‹å¥½**: æ‰€æœ‰åŒºåŸŸåœ¨ 768px ä»¥ä¸‹è‡ªåŠ¨å•åˆ—æ’å¸ƒ
